{% extends "layout.html" %}
{% load url from future %}
{% load i18n %}

{% block title %}
    {% trans "Address for origin of deliveries (where your items are shipped from" %} | {{ block.super }}
{% endblock %}


{% block content %}


{% block shipping_address %}


    <div class="ssub-header">
        <h2>{% trans "Where would you like your items to be shipped from?" %}</h2>


           <div class="span4 pull-right">
              <a id="id_skipSellerAddress" class="btn orgButton" style="font-size:1.2em" href="{% url 'catalogue:index' %}?booth={{request.user.partner.id}}">{% trans "Click here to skip this step and continue to your booth" %}</a>


              {% comment %}
              <input style="margin:0 0 1em 0" class="boothButton" type="button" value="Skip, continue to booth" onclick=location.href="/catalogue/?booth={{request.user.partner.id}}">
            <div style="clear:both;"></div>
{% endcomment %}
            <div style="clear:both;margin-top:8px"></div>

            {% if not partnerAddress%}
              Note that until you have set up a valid address to ship from, your items will only be available for local pickup. 
            {% endif %}
            </div>


    </div>
            <div style="clear:both;"></div>

    {% if request.user.is_authenticated %}


        {% if addresses %}
            
            <h3>{% trans "An address from your address book?" %}</h3>
            <div class="choose-block">
                <ul class="row-fluid">
                    {% for address in addresses %}
					<li class="span4">
						<div class="well well-info {% if address.is_default_for_store %}default-address{% endif %}">
							<address>{% for field in address.active_address_fields %}
							{{ field }}<br/>
							{% endfor %}</address>
							<form action="{% url 'customer:store-shipping-address' %}?basket_id={{basket.id}}" method="post">
								{% csrf_token %}
								<input type="hidden" name="action" value="ship_to" />
								<input type="hidden" name="address_id" value="{{ address.id }}" />
								

								<a class="btn btn-small btn-info" href="{% url 'checkout:user-address-update' address.id %}?basket_id={{basket.id}}">{% trans "Edit" %}</a>
								<a href="{% url 'checkout:user-address-delete' address.id %}?basket_id={{basket.id}}" class="btn btn-small btn-danger">{% trans "Delete" %}</a>

                                                                <div style="clear:both"></div>


                        <button type="submit" style="position:relative;margin:10 0 10 0" class="btn btn-primary btn-full ship-address js-disable-on-click" data-loading-text="{% trans 'Setting shipping address, please wait...' %}">{% trans "Use this address" %}</button>

							</form>
						</div>
					</li>
                    {% if forloop.counter|divisibleby:3 %}
                        </ul>
                        {% if not forloop.last %}<ul class="row-fluid">{% endif %}
                    {% endif %}
                    {% endfor %}
                </ul>
            </div>
            <h3>{% trans "Or a new address?" %}</h3>
        {% endif %}
    </div>
    {% endif %}

    <form action="{% url 'customer:store-shipping-address' %}" method="post" class="form-horizontal"  data-behaviours="lock">
        <div class="well well-info">
            {% csrf_token %}
            {% include "partials/form_fields.html" with form=form %}
        </div>
        <div class="form-actions">

            <button id='store-ship-new-submit' type="submit" style="position:relative;margin:10 0 10 0" class="btn btn-primary btn-full ship-address">{% trans "Save the new address" %}</button>

            {#<button type="submit" class="btn btn-large btn-primary">{% trans "Continue" %}</button>#}
      
        </div>
    </form>


{% endblock shipping_address %}

{% endblock %}
